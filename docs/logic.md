# 一、前言
> 主要是研究长阳科技的具体的排程需求

# 二、排产逻辑

> 基本关系：母料——〉母卷
## 1. 母卷排程
> 基本信息：目前只考虑两条产线，并且我们要满足订单可以自由在两条产线上排程，天然的适合planningListVariable
> 数据来源：预测驱动；基于过去成品的历史出货数据，然后结合BOM结构逆向推演生成母卷的月度预测建议值。然后人工再根据库存以及在制订单对系统预测建议进行调整和确认——>生成 `母卷生产主计划`

- 核心约束
	- 主要考虑产线产能、配方兼容性、厚度轮转（由薄到厚/由厚到薄）以及换型成本最优（如牌号、配方顺序）

- 基本逻辑
	- 核心思路——>给母卷的生产订单安排`产线`、`时间`
		- 安排产线
			- 母卷和产线有一个对应关系  ，说明各个母卷与不同产线之间的对应关系
		- 安排时间
			- 我们是连续生产，所以非常符合顺序排程，我们只需要安排每个母卷的位置顺序，然后用影子变量倒退出母卷的具体时间
			- 另外我们母卷没有交期时间，我们的优先级是按照当前库存的安全库存来排序






## 2. 母料排程





## 3. 注意
- 虽然我们应该先出母料的排程然后去做母卷的排程，但是实际情况是，我们母卷的排程先排出来，然后再根据母卷的开始时间倒退出来母料的结束时间



# 二、排程规则
> 母卷月排排产规则：
- 1. 不考虑交期
- 2. 不考虑齐套
- 3. 不按照日产能进行拆分
- 4. 产品与产线强约束
- 5. 整体第一优先级顺序：按现有库存可供应天数排序，天数短的优先。现有库存可供应天数=现有库存量/月均出货量
- 6. 根据期望开始生产时间进行优先级排序（可打破该约束，换型目标优化＞此优先级）
- 7. 换型优化目标：
	- （1）相同配方和型号尽可能一起生产
	- （2）厚度可以从薄到厚或厚到薄，衔接时再由厚到薄或薄到厚
		- 厚度
	- （3）T10ESY厚度188、150和T9EST厚度225、188排产最佳，其次T24DJX和T24DJY放一起；T29DJY和T29DJX放一起；T42DJX和T9EST放一起；T29DJX和T42DJX放一起；T61ESYH和T10ESY排一起；T29QDJY和T29DJY排一起；
	- （4）换过滤器后，优先排产顺序：T19EST(T)厚度188（高光）-->T4FDX=T4FDY（遇到T4FDX和T4FDY时，根据厚到薄的优先级排。）-->T5FDX-->T7FDX-->T24DJX-->T9EST厚度100（不能衔接188、255）-->T61-->T14。换完之后20天之内只能做这些型号和优先级。20天之后可打破这个规则。如果这几个型号20天之内就可以生产完，那么也可以打破这个规则
	- 型号与产线关系：QDJY优先二线生产。ESYH优先四线。
![[0. 排程具体的需求.png]]
- 8. 拆产线
  如果有多条产线可生产的情况下
	- （1）先按照一条产线计算每天的产出。
	- （2）再计算每日出货量=月度预测/30
	- （3）再计算现有库存预计可用天数=（现有库存（相同型号成品换算母卷的）+每天产出*（超出30天则取30天，否则取一条线生产天数【一条线生产天数，30】）/每日出货量（相同型号成品换算母卷的）。
	- （4）判断库存预计可用天数是否可以撑够30天。
	- （5）若能撑够，则只开一条产线（不拆分）。
	- （6）若撑不够，则开另一条产线，以此类推，保证撑够30天。
	- （7）如果需要开另一条产线，则系统自动拆分母卷主排程的数量（作为两个主计划），数量拆分优化原则为整体生产时间最短。
- 9. 第二次跑母卷主排程时，通过快速移动，只改时间（因为数量会变），不改产线和先后顺序

---

> 特殊场景处理方式
- **过滤器**更换策略：系统在排程时会自动读取过滤器更换计划，在计划更换时间后，系统算法会强制优先安排对表面光洁度要求极高的产品（如T19高光膜），以利用设备的最佳工艺状态。
	- 换过滤器期间：作为计划停机时间维护
- **厚度轮转**约束：系统强制执行“由薄到厚”再“由厚到薄”的平稳连续生产排序。






























